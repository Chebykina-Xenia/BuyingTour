# Отчёт о проведённом тестировании
Проведено тестирование функции: Покупка тура с дебетовой карты — на сайте [сервиса по покупке тура](http://localhost:8080/).
С помощью автотестов протестирована отправка формы, взаимодействие с БД и отправка формы с невалидными значениями в полях. Всего 40 автотестов.
![image](https://user-images.githubusercontent.com/88968664/157866327-262924e1-9121-4c24-a6d5-1d7f6cddc43d.png)

## Тест-кейсы
В начале каждого автотеста необходимо зайти на сайт [сервиса по покупке тура](http://localhost:8080/) — Нажать на кнопку «Купить» — Открывается форма «Оплата по карте».

### 1. Отправка заполненной формы. Платёж одобрен. 
Заполнить форму «Оплата по карте».

|Наименование поля | Данные для заполнения                                                                                         |
|-------------------|---------------------------------------------------------------------------------------------------------------|
| Номер карты       | 1111 2222 3333 4444                                                                                           |
| Месяц             | Ввод значения в диапазоне 01-12, но если указан текущий год, то месяц должен быть больше или равен текущему   |
| Год               | Число из диапазона 22-27                                                                                      |
| Владелец          | Буквы на латинице от 1 до 40                                                                                  |
| CVC/CVV           | Любых 3 цифры                                                                                                 |

Нажать на кнопку «Продолжить».

**Ожидаемый резудьтат:** Выводится сообщение: «Успешно! Операция одобрена банком.» Данные заносятся в таблицу order_entity и payment_entity. Данные в таблице payment_entity: amount = 45 000 руб, created = sysdate, status = APPROVED. Данные в таблице order_entity: created = sysdate. 

**Фактический резудьтат:** Выводится сообщение: «Успешно! Операция одобрена банком.» Данные заносятся в таблицу order_entity и payment_entity. Данные в таблице payment_entity: amount = 4 500 000 руб, created не равна sysdate, status = APPROVED. Данные в таблице order_entity: created не равна sysdate. 

### 2. Отправка заполненной формы. Платёж не одобрен. 
Заполнить форму «Оплата по карте».

| Наименование поля | Данные для заполнения                                                                                         |
|-------------------|---------------------------------------------------------------------------------------------------------------|
| Номер карты       | 5555 6666 7777 8888                                                                                           |
| Месяц             | Ввод значения в диапазоне 01-12, но если указан текущий год, то месяц должен быть больше или равен текущему   |
| Год               | Число из диапазона 22-27                                                                                      |
| Владелец          | Буквы на латинице от 1 до 40                                                                                  |
| CVC/CVV           | Любых 3 цифры                                                                                                 |

Нажать на кнопку «Продолжить».

**Ожидаемый резудьтат:** Выводится сообщение: «Ошибка! Операция не одобрена банком.» Данные заносятся в таблицу order_entity и payment_entity. Данные в таблице payment_entity: amount = 45 000 руб, created = sysdate, status = DECLINED. Данные в таблице order_entity: created = sysdate.

**Фактический резудьтат:** Выводится сообщение: «Успешно! Операция одобрена банком.» Данные заносятся в таблицу order_entity и payment_entity. Данные в таблице payment_entity: amount = 4 500 000 руб, created не равна sysdate, status = DECLINED. Данные в таблице order_entity: created не равна sysdate.

### 3. Отправка незаполненной формы.
Нажать на кнопку «Продолжить». 

**Ожидаемый резудьтат:** форма не отправляется, под полями выводятся сообщения: «Неверный формат» или «Поле обязательно для заполнения».

**Фактический резудьтат:** форма не отправляется, под полями выводятся сообщения: «Неверный формат» или «Поле обязательно для заполнения».

![image](https://user-images.githubusercontent.com/88968664/157866716-3359aadb-7ea5-4e08-bc1c-c6b4db68b02a.png)


### 4. Заполнение одного поля — невалидным значением, остальные поля — валидные значения.
Заполнить форму «Оплата по карте» — Нажать кнопку «Продолжить».

##### Невалидные значения для заполнения поля «Номер карты».
| Данные для заполнения | Ожидаемый результат                                        | Фактический результат                                      |
|-----------------------|------------------------------------------------------------|------------------------------------------------------------|
| Пустое поле           | Под полем Номер карты выводится сообщение: Неверный формат | Под полем Номер карты выводится сообщение: Неверный формат |
| 5 цифр                | Под полем Номер карты выводится сообщение: Неверный формат | Под полем Номер карты выводится сообщение: Неверный формат |
| Русские буквы         | Поле остаётся пустым                                       | Поле остаётся пустым                                       |
| Символы               | Поле остаётся пустым                                       | Поле остаётся пустым                                       |
| Буквы на латинице     | Поле остаётся пустым                                       | Поле остаётся пустым                                       |
| 17 цифр               | В поле остаются первые 16 цифр                             | Не даёт вводить больше 16 цифр                             |
| 16 цифр               | Выводится сообщение: «Ошибка! Банк отказал в проведении операции». Данные в БД не передаются | Выводятся сразу 2 сообщения: «Ошибка! Банк отказал в проведении операции» и «Успешно! Операция одобрена банком.». Данные в БД не передаются. |

![image](https://user-images.githubusercontent.com/88968664/157867341-a38e3532-9e13-4e35-b7c1-b5be0183f8c8.png)

##### Невалидные значения для заполнения поля «Месяц».
| Данные для заполнения                                 | Ожидаемый результат                                                     |Фактический результат     |
|-------------------------------------------------------|-------------------------------------------------------------------------|--------------------------|
| Пустое поле                                           | Под полем Месяц выводится сообщение: Неверный формат                    | Под полем Месяц выводится сообщение: Неверный формат |
| 1 цифра                                               | Под полем Месяц выводится сообщение: Неверный формат                    | Под полем Месяц выводится сообщение: Неверный формат |
| 00                                                    | Под полем Месяц выводится сообщение: Неверно указан срок действия карты |Форма отправляется успешно |
| 13                                                    | Под полем Месяц выводится сообщение: Неверно указан срок действия карты | Под полем Месяц выводится сообщение: Неверно указан срок действия карты |
| Больше 2 цифр                                         | В поле остаются первые 2 цифр                                           | Не даёт вводить более 1 цифр |
| Русские буквы                                         | Поле остаётся пустым                                                    | Поле остаётся пустым |
| Символы                                               | Поле остаётся пустым                                                    | Поле остаётся пустым |
| Буквы на латинице                                     | Поле остаётся пустым                                                    | Поле остаётся пустым |
| Если вводим текущий год, вводим месяц меньше текущего | Под полем Месяц выводится сообщение: Неверно указан срок действия карты | Под полем Месяц выводится сообщение: Неверно указан срок действия карты |

![image](https://user-images.githubusercontent.com/88968664/157867230-6c650a09-ae27-4adf-a503-7de370cc92c6.png)

##### Невалидные значения для заполнения поля «Год».
| Данные для заполнения               | Ожидаемый результат                                                     | Фактический результат            |
|-------------------------------------|-------------------------------------------------------------------------|----------------------------------|
| Пустое поле                         | Под полем Год выводится сообщение: Неверный формат                      | Под полем Год выводится сообщение: Неверный формат |
| 1 цифра                             | Под полем Год выводится сообщение: Неверный формат                    | Под полем Год выводится сообщение: Неверный формат |
| Цифра меньше текущего года          | Под полем Год выводится сообщение: Истёк срок действия карты          | Под полем Год выводится сообщение: Истёк срок действия карты |
| Цифра больше чем текущий год +5 лет | Под полем Год выводится сообщение: Неверно указан срок действия карты | Под полем Год выводится сообщение: Неверно указан срок действия карты |
| Больше 2 цифр                       | В поле остаются первые 2 цифр                                           | Не даёт вводить больше 2 цифр |
| Русские буквы                       | Поле остаётся пустым                                                    | Поле остаётся пустым |
| Символы                             | Поле остаётся пустым                                                    | Поле остаётся пустым |
| Буквы на латинице                   | Поле остаётся пустым                                                    | Поле остаётся пустым |

![image](https://user-images.githubusercontent.com/88968664/157867389-ba1802bf-f574-43a3-b926-07aad2c11b6b.png)

##### Невалидные значения для заполнения поля «Владелец».
| Данные для заполнения | Ожидаемый результат                                                                          | Фактический результат       |
|-----------------------|----------------------------------------------------------------------------------------------|-----------------------------|
| Пустое поле           | Под полем Владелец выводится сообщение: Поле обязательно для заполнения                      | Под полем Владелец выводится сообщение: Поле обязательно для заполнения |
| 1 буква               | Под полем Владелец выводится сообщение: диапазон значения в поле должен быть от 2 до 40 букв | Выводится сообщение: Успешно! Операция одобрена банком. Данные передаются в БД. |
| 41 буква              | Под полем Владелец выводится сообщение: диапазон значения в поле должен быть от 2 до 40 букв | Выводится сообщение: Успешно! Операция одобрена банком. Данные передаются в БД. |
| Русские буквы         | Поле остаётся пустым                                                                         | Выводится сообщение: Успешно! Операция одобрена банком. Данные передаются в БД. |
| Цифры                 | Поле остаётся пустым                                                                         | Выводится сообщение: Успешно! Операция одобрена банком. Данные передаются в БД. |

![image](https://user-images.githubusercontent.com/88968664/157867448-3ce90adb-c18f-421d-91d9-29adeeaa054e.png)

##### Невалидные значения для заполнения поля «CVC/CVV».
| Данные для заполнения | Ожидаемый результат                                    | Фактический результат      |
|-----------------------|--------------------------------------------------------|----------------------------|
| Пустое поле           | Под полем CVC/CVV выводится сообщение: Неверный формат | Под полем CVC/CVV выводится сообщение: Неверный формат. Под полем Владелец выводится сообщение: Поле обязательно для заполнения.|
| 1 цифра               | Под полем CVC/CVV выводится сообщение: Неверный формат | Под полем CVC/CVV выводится сообщение: Неверный формат |
| Больше 3 цифр         | В поле остаются первые 3 цифр                          | Не даёт вводить больше 3 цифр |
| Русские буквы         | Поле остаётся пустым                                   | Поле остаётся пустым |
| Символы               | Поле остаётся пустым                                   | Поле остаётся пустым |
| Буквы на латинице     | Поле остаётся пустым                                   | Поле остаётся пустым |

![image](https://user-images.githubusercontent.com/88968664/157867490-f71897dd-a740-455f-8bcd-efa9bdffdf3b.png)

## Процент успешных/не успешных тестов
**Всего тестов:** 40 

**Успешных тестов:** 75% 

**Не успешных тестов:** 35%

## Общие рекомендации
+ Проверить передачу данных в БД.
+ Обратить внимание на ввод невалидных данных в поле Владелец.
+ При совершении покупки с заблокированной карты, где платёж не ободрен, должно выходить сообщение об ошибке, а не об успехе. 
