# Ручное тестирование сервиса по покупке тура
 
## Покупка тура с дебетовой карты
Зайти на сайт [сервиса по покупке тура](http://localhost:8080/) — Нажать на кнопку «Купить» — Открывается форма «Оплата по карте».
### Позитивные сценарии
1. Отправка заполненной формы. Платёж одобрен. 
Заполнить форму «Оплата по карте».

|Наименование поля | Данные для заполнения                                                                                         |
|-------------------|---------------------------------------------------------------------------------------------------------------|
| Номер карты       | 1111 2222 3333 4444                                                                                           |
| Месяц             | Ввод значения в диапазоне 01-12, но если указан текущий год, то месяц должен быть больше или равен текущему   |
| Год               | Число из диапазона 22-27                                                                                      |
| Владелец          | Буквы на латинице от 1 до 40                                                                                  |
| CVC/CVV           | Любых 3 цифры                                                                                                 |

Нажать на кнопку «Продолжить».

**Ожидаемый резудьтат:** Выводится сообщение: «Успешно! Операция одобрена банком.» Данные заносятся в таблицу order_entity и payment_entity. Данные в таблице payment_entity: amount = 45 000 руб, created = sysdate, status = APPROVED. Данные в таблице order_entity: created = sysdate. 

**Фактический резудьтат:** Выводится сообщение: «Успешно! Операция одобрена банком.» Данные заносятся в таблицу order_entity и payment_entity. Данные в таблице payment_entity: amount = 4 500 000 руб, created не равна sysdate, status = APPROVED. Данные в таблице order_entity: created не равна sysdate. 


2. Отправка заполненной формы. Платёж не одобрен. 
Заполнить форму «Оплата по карте».

| Наименование поля | Данные для заполнения                                                                                         |
|-------------------|---------------------------------------------------------------------------------------------------------------|
| Номер карты       | 5555 6666 7777 8888                                                                                           |
| Месяц             | Ввод значения в диапазоне 01-12, но если указан текущий год, то месяц должен быть больше или равен текущему   |
| Год               | Число из диапазона 22-27                                                                                      |
| Владелец          | Буквы на латинице от 1 до 40                                                                                  |
| CVC/CVV           | Любых 3 цифры                                                                                                 |

Нажать на кнопку «Продолжить».

**Ожидаемый резудьтат:** Выводится сообщение: «Ошибка! Операция не одобрена банком.» Данные заносятся в таблицу order_entity и payment_entity (статус платежа — DECLINED).

**Фактический резудьтат:** Выводится сообщение: «Успешно! Операция одобрена банком.» Данные заносятся в таблицу order_entity и payment_entity (статус платежа — DECLINED).

## Покупка тура в кредит
Зайти на сайт [сервиса по покупке тура](http://localhost:8080/) — Нажать на кнопку «Купить в кредит» — Открывается форма «Кредит по данным карты».
### Позитивные сценарии
1. Отправка заполненной формы. Платёж одобрен. 
Заполнить форму «Кредит по данным карты».

|Наименование поля | Данные для заполнения                                                                                         |
|-------------------|---------------------------------------------------------------------------------------------------------------|
| Номер карты       | 1111 2222 3333 4444                                                                                           |
| Месяц             | Ввод значения в диапазоне 01-12, но если указан текущий год, то месяц должен быть больше или равен текущему   |
| Год               | Число из диапазона 22-27                                                                                      |
| Владелец          | Буквы на латинице от 1 до 40                                                                                  |
| CVC/CVV           | Любых 3 цифры                                                                                                 |

Нажать на кнопку «Продолжить».

**Ожидаемый резудьтат:** Выводится сообщение: «Успешно! Операция одобрена банком.» Данные заносятся в таблицу order_entity и credit_request_entity. Данные в таблице order_entity: created = sysdate. Данные в таблице credit_request_entity: created = sysdate, status = APPROVED. В таблице order_entity в столбце credit_id проставляется id из таблицы credit_request_entity. 

**Фактический резудьтат:** Выводится сообщение: «Успешно! Операция одобрена банком.» Данные заносятся в таблицу order_entity и credit_request_entity. Данные в таблице order_entity: created не равна sysdate. Данные в таблице credit_request_entity: created не равна sysdate, status = APPROVED. В таблице order_entity в столбце credit_id нет значения.

2. Отправка заполненной формы. Платёж не одобрен. 
Заполнить форму «Кредит по данным карты».

| Наименование поля | Данные для заполнения                                                                                         |
|-------------------|---------------------------------------------------------------------------------------------------------------|
| Номер карты       | 5555 6666 7777 8888                                                                                           |
| Месяц             | Ввод значения в диапазоне 01-12, но если указан текущий год, то месяц должен быть больше или равен текущему   |
| Год               | Число из диапазона 22-27                                                                                      |
| Владелец          | Буквы на латинице от 1 до 40                                                                                  |
| CVC/CVV           | Любых 3 цифры                                                                                                 |

Нажать на кнопку «Продолжить».

**Ожидаемый резудьтат:** Выводится сообщение: «Ошибка! Операция не одобрена банком.» Данные заносятся в таблицу order_entity и credit_request_entity. Данные в таблице order_entity: created = sysdate. Данные в таблице credit_request_entity: created = sysdate, status = DECLINED. В таблице order_entity в столбце credit_id проставляется id из таблицы credit_request_entity. 

**Фактический резудьтат:** Выводится сообщение: «Успешно! Операция одобрена банком.» Данные заносятся в таблицу order_entity и credit_request_entity. Данные в таблице order_entity: created не равна sysdate. Данные в таблице credit_request_entity: created не равна sysdate, status = DECLINED. В таблице order_entity в столбце credit_id нет значения.

### Негативные сценарии для покупки тура в кредит или по дебетовой карте
1. Отправка незаполненной формы.
Нажать на кнопку «Продолжить». 

**Ожидаемый резудьтат:** форма не отправляется, под полями выводятся сообщения: «Неверный формат» или «Поле обязательно для заполнения».

**Фактический резудьтат:** форма не отправляется, под полями выводятся сообщения: «Неверный формат» или «Поле обязательно для заполнения».

2. Заполнение одного поля — невалидным значением, остальные поля — валидные значения.
Заполнить поля — Нажать кнопку «Продолжить».

##### Невалидные значения для заполнения поля «Номер карты».
| Данные для заполнения | Ожидаемый результат                                        | Фактический результат                                      |
|-----------------------|------------------------------------------------------------|------------------------------------------------------------|
| Пустое поле           | Под полем Номер карты выводится сообщение: Неверный формат | Под полем Номер карты выводится сообщение: Неверный формат |
| 5 цифр                | Под полем Номер карты выводится сообщение: Неверный формат | Под полем Номер карты выводится сообщение: Неверный формат |
| Русские буквы         | Поле остаётся пустым                                       | Поле остаётся пустым                                       |
| Символы               | Поле остаётся пустым                                       | Поле остаётся пустым                                       |
| Буквы на латинице     | Поле остаётся пустым                                       | Поле остаётся пустым                                       |
| 17 цифр               | В поле остаются первые 16 цифр                             | Не даёт вводить больше 16 цифр                             |
| 16 цифр               | Выводится сообщение: «Ошибка! Банк отказал в проведении операции». Данные в БД не передаются | Выводится сообщение: «Ошибка! Банк отказал в проведении операции». Данные в БД не передаются |

##### Невалидные значения для заполнения поля «Месяц».
| Данные для заполнения                                 | Ожидаемый результат                                                     |Фактический результат     |
|-------------------------------------------------------|-------------------------------------------------------------------------|--------------------------|
| Пустое поле                                           | Под полем Месяц выводится сообщение: Неверный формат                    | Под полем Месяц выводится сообщение: Неверный формат |
| 1 цифра                                               | Под полем Месяц выводится сообщение: Неверный формат                    | Под полем Месяц выводится сообщение: Неверный формат |
| 00                                                    | Под полем Месяц выводится сообщение: Неверно указан срок действия карты |Под полем Месяц выводится сообщение: Неверно указан срок действия карты |
| 13                                                    | Под полем Месяц выводится сообщение: Неверно указан срок действия карты | Под полем Месяц выводится сообщение: Неверно указан срок действия карты |
| Больше 2 цифр                                         | В поле остаются первые 2 цифр                                           | Не даёт вводить более 1 цифр |
| Русские буквы                                         | Поле остаётся пустым                                                    | Поле остаётся пустым |
| Символы                                               | Поле остаётся пустым                                                    | Поле остаётся пустым |
| Буквы на латинице                                     | Поле остаётся пустым                                                    | Поле остаётся пустым |
| Если вводим текущий год, вводим месяц меньше текущего | Под полем Месяц выводится сообщение: Неверно указан срок действия карты | Под полем Месяц выводится сообщение: Неверно указан срок действия карты |

##### Невалидные значения для заполнения поля «Год».
| Данные для заполнения               | Ожидаемый результат                                                     | Фактический результат            |
|-------------------------------------|-------------------------------------------------------------------------|----------------------------------|
| Пустое поле                         | Под полем Год выводится сообщение: Неверный формат                      | Под полем Год выводится сообщение: Неверный формат |
| 1 цифра                             | Под полем Месяц выводится сообщение: Неверный формат                    | Под полем Год выводится сообщение: Неверный формат |
| Цифра меньше текущего года          | Под полем Месяц выводится сообщение: Истёк срок действия карты          | Под полем Месяц выводится сообщение: Истёк срок действия карты |
| Цифра больше чем текущий год +5 лет | Под полем Месяц выводится сообщение: Неверно указан срок действия карты | Под полем Месяц выводится сообщение: Неверно указан срок действия карты |
| Больше 2 цифр                       | В поле остаются первые 2 цифр                                           | Не даёт вводить больше 2 цифр |
| Русские буквы                       | Поле остаётся пустым                                                    | Поле остаётся пустым |
| Символы                             | Поле остаётся пустым                                                    | Поле остаётся пустым |
| Буквы на латинице                   | Поле остаётся пустым                                                    | Поле остаётся пустым |

##### Невалидные значения для заполнения поля «Владелец».
| Данные для заполнения | Ожидаемый результат                                                                          | Фактический результат       |
|-----------------------|----------------------------------------------------------------------------------------------|-----------------------------|
| Пустое поле           | Под полем Владелец выводится сообщение: Поле обязательно для заполнения                      | Под полем Владелец выводится сообщение: Поле обязательно для заполнения |
| 1 буква               | Под полем Владелец выводится сообщение: диапазон значения в поле должен быть от 2 до 40 букв | Выводится сообщение: Успешно! Операция одобрена банком. Данные передаются в БД. |
| 41 буква              | Под полем Владелец выводится сообщение: диапазон значения в поле должен быть от 2 до 40 букв | Выводится сообщение: Успешно! Операция одобрена банком. Данные передаются в БД. |
| Русские буквы         | Поле остаётся пустым                                                                         | Выводится сообщение: Успешно! Операция одобрена банком. Данные передаются в БД. |
| Цифры                 | Поле остаётся пустым                                                                         | Выводится сообщение: Успешно! Операция одобрена банком. Данные передаются в БД. |

##### Невалидные значения для заполнения поля «CVC/CVV».
| Данные для заполнения | Ожидаемый результат                                    | Фактический результат      |
|-----------------------|--------------------------------------------------------|----------------------------|
| Пустое поле           | Под полем CVC/CVV выводится сообщение: Неверный формат | Под полем CVC/CVV выводится сообщение: Неверный формат |
| 1 цифра               | Под полем CVC/CVV выводится сообщение: Неверный формат | Под полем CVC/CVV выводится сообщение: Неверный формат |
| Больше 3 цифр         | В поле остаются первые 3 цифр                          | Не даёт вводить больше 3 цифр |
| Русские буквы         | Поле остаётся пустым                                   | Поле остаётся пустым |
| Символы               | Поле остаётся пустым                                   | Поле остаётся пустым |
| Буквы на латинице     | Поле остаётся пустым                                   | Поле остаётся пустым |

